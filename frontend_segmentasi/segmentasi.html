<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Segmentasi Gaya Belajar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
            font-weight: 300;
        }

        .form-container {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 0.95em;
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .loading {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .result-container {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border: 1px solid #e1e8ed;
        }

        .result-container.hidden {
            display: none;
        }

        .result-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .result-header h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .prediction-result {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 600;
        }

        .cluster-description {
            background: #e8f4fc;
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin-bottom: 20px;
            font-size: 1.05em;
            line-height: 1.7;
        }

        .input-details {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e1e8ed;
        }

        .input-details h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .input-details ul {
            list-style: none;
            padding: 0;
        }

        .input-details li {
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
        }

        .input-details li:last-child {
            border-bottom: none;
        }

        .input-details li strong {
            color: #667eea;
        }

        .error-message {
            background: #ffe6e6;
            color: #d63384;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #f5c6cb;
            margin-top: 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 2em;
            }

            .form-container {
                padding: 20px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Animasi loading */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì Segmentasi Gaya Belajar</h1>
            <p class="subtitle">Identifikasi gaya belajar Anda berdasarkan aktivitas pembelajaran</p>
        </div>
        
        <div class="form-container">
            <form id="learningForm">
                <div class="form-section">
                    <h2>üìä Input Data Pembelajaran</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="engagement_score">Skor Keterlibatan (0-100):</label>
                            <input type="number" step="0.01" id="engagement_score" min="0" max="100" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="duration_minutes">Durasi Belajar (menit):</label>
                            <input type="number" step="0.01" id="duration_minutes" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="completion_rate">Tingkat Penyelesaian (0-1):</label>
                            <input type="number" step="0.01" id="completion_rate" min="0" max="1" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="quiz_score">Skor Kuis (0-100):</label>
                            <input type="number" step="0.01" id="quiz_score" min="0" max="100" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="material_rating">Rating Materi (1-5):</label>
                            <input type="number" step="0.01" id="material_rating" min="1" max="5" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="interaction_duration">Durasi Interaksi (menit):</label>
                            <input type="number" step="0.01" id="interaction_duration" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="material_engagement_score">Skor Keterlibatan Materi (0-100):</label>
                            <input type="number" step="0.01" id="material_engagement_score" min="0" max="100" required>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">
                    üîç Prediksi Gaya Belajar
                </button>
            </form>
            
            <div id="resultContainer" class="result-container hidden">
                <div class="result-header">
                    <h2>üéØ Hasil Prediksi</h2>
                </div>
                
                <div id="predictionResult" class="prediction-result"></div>
                <div id="clusterDescription" class="cluster-description"></div>
                
                <div class="input-details">
                    <h3>üìã Detail Input Data</h3>
                    <ul id="inputDetails"></ul>
                </div>
            </div>
            
            <div id="errorMessage" class="error-message hidden"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('learningForm');
            const resultContainer = document.getElementById('resultContainer');
            const predictionResult = document.getElementById('predictionResult');
            const clusterDescription = document.getElementById('clusterDescription');
            const inputDetails = document.getElementById('inputDetails');
            const errorMessage = document.getElementById('errorMessage');
            const submitBtn = document.getElementById('submitBtn');

            // Deskripsi untuk setiap gaya belajar
            const learningStyleDescriptions = {
                "Visual": {
                    icon: "üëÅÔ∏è",
                    description: "Anda adalah tipe pembelajar Visual! Anda lebih mudah memahami informasi melalui gambar, diagram, grafik, dan visualisasi. Untuk meningkatkan pembelajaran, gunakan mind map, highlighter warna-warni, diagram alur, dan alat bantu visual lainnya."
                },
                "Auditori": {
                    icon: "üëÇ",
                    description: "Anda adalah tipe pembelajar Auditori! Anda lebih mudah memahami melalui pendengaran dan penjelasan lisan. Cobalah merekam materi pembelajaran, mendengarkan podcast edukatif, berdiskusi dengan teman, atau menjelaskan konsep dengan suara keras."
                },
                "Kinestetik": {
                    icon: "ü§∏‚Äç‚ôÇÔ∏è",
                    description: "Anda adalah tipe pembelajar Kinestetik! Anda lebih mudah memahami melalui praktik langsung dan pengalaman fisik. Cobalah belajar sambil bergerak, gunakan objek nyata, buat model fisik, atau lakukan eksperimen hands-on."
                }
            };

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Reset error message
                errorMessage.classList.add('hidden');
                resultContainer.classList.add('hidden');
                
                // Ambil data dari form
                const inputData = {
                    engagement_score: parseFloat(document.getElementById('engagement_score').value),
                    duration_minutes: parseFloat(document.getElementById('duration_minutes').value),
                    completion_rate: parseFloat(document.getElementById('completion_rate').value),
                    quiz_score: parseFloat(document.getElementById('quiz_score').value),
                    material_rating: parseFloat(document.getElementById('material_rating').value),
                    interaction_duration: parseFloat(document.getElementById('interaction_duration').value),
                    material_engagement_score: parseFloat(document.getElementById('material_engagement_score').value)
                };

                // Validasi input
                if (!validateInput(inputData)) {
                    showError('Mohon periksa kembali input data Anda. Pastikan semua nilai berada dalam rentang yang benar.');
                    return;
                }

                // Tampilkan loading
                showLoading();

                // Kirim data ke backend
                predictLearningStyle(inputData)
                    .then(result => {
                        hideLoading();
                        showResult(result, inputData);
                    })
                    .catch(error => {
                        hideLoading();
                        console.error('Error:', error);
                        showError('Terjadi kesalahan saat memprediksi gaya belajar. Pastikan server backend sudah berjalan di http://localhost:8001');
                    });
            });

            // Validasi input
            function validateInput(data) {
                return (
                    data.engagement_score >= 0 && data.engagement_score <= 100 &&
                    data.duration_minutes >= 0 &&
                    data.completion_rate >= 0 && data.completion_rate <= 1 &&
                    data.quiz_score >= 0 && data.quiz_score <= 100 &&
                    data.material_rating >= 1 && data.material_rating <= 5 &&
                    data.interaction_duration >= 0 &&
                    data.material_engagement_score >= 0 && data.material_engagement_score <= 100
                );
            }

            // Tampilkan hasil
            function showResult(result, inputData) {
                const learningStyle = result.predicted_gaya_belajar;
                const styleInfo = learningStyleDescriptions[learningStyle] || {
                    icon: "üéØ",
                    description: "Gaya belajar Anda unik dan mungkin merupakan kombinasi dari beberapa tipe."
                };

                // Tampilkan hasil prediksi
                predictionResult.innerHTML = `
                    ${styleInfo.icon} Gaya Belajar Anda: <strong>${learningStyle}</strong>
                `;
                
                // Tampilkan deskripsi
                clusterDescription.innerHTML = styleInfo.description;
                
                // Tampilkan detail input dengan format yang lebih baik
                const inputLabels = {
                    engagement_score: 'Skor Keterlibatan',
                    duration_minutes: 'Durasi Belajar (menit)',
                    completion_rate: 'Tingkat Penyelesaian',
                    quiz_score: 'Skor Kuis',
                    material_rating: 'Rating Materi',
                    interaction_duration: 'Durasi Interaksi (menit)',
                    material_engagement_score: 'Skor Keterlibatan Materi'
                };

                inputDetails.innerHTML = '';
                for (const [key, value] of Object.entries(inputData)) {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span><strong>${inputLabels[key]}:</strong></span>
                        <span>${value}</span>
                    `;
                    inputDetails.appendChild(li);
                }
                
                // Tampilkan container hasil
                resultContainer.classList.remove('hidden');
                
                // Scroll ke hasil
                resultContainer.scrollIntoView({ behavior: 'smooth' });
            }

            // Tampilkan error
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.classList.remove('hidden');
            }

            // Tampilkan loading
            function showLoading() {
                submitBtn.innerHTML = '<span class="loading-spinner"></span>Sedang Memprediksi...';
                submitBtn.classList.add('loading');
                submitBtn.disabled = true;
            }

            // Sembunyikan loading
            function hideLoading() {
                submitBtn.innerHTML = 'üîç Prediksi Gaya Belajar';
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
            }

            // Fungsi untuk memanggil API backend
            async function predictLearningStyle(data) {
                try {
                    const response = await fetch('http://localhost:8001/api/v1/predict/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    return result;
                } catch (error) {
                    console.error('Error:', error);
                    throw error;
                }
            }
        });
    </script>
</body>
</html>